# 07 - 练习与作业

## 合约扩展作业

### 基础作业
1. **事件增强**: 为 ERC4626 增加事件 `RewardAccrued(user, amount)` 并在 `_accrue` 触发
2. **管理功能**: 添加 `pause/unpause` 管理功能（OpenZeppelin `Pausable`）
3. **测试完善**: 编写更多边界条件测试：0 金额、重复 claim、跨多段时间

### 进阶作业
4. **利率调整**: 实现动态利率调整功能，支持 owner 修改年化利率
5. **复合计息**: 尝试实现复合计息算法替代当前的线性计息
6. **费用机制**: 添加提款手续费功能

## 前端扩展作业

### UI/UX 改进
1. **换算展示**: 前端展示 `assets <-> shares` 的实时换算
2. **Mint 路径**: 支持 ERC4626 的 `mint` 操作路径（指定份额而非资产）
3. **交易历史**: 展示用户的存取和领奖历史记录
4. **数据图表**: 使用图表展示奖励累积趋势

### 功能增强
5. **批量操作**: 支持一键"提取全部资产+领取全部奖励"
6. **预估计算**: 实时显示存款后的预期年收益
7. **多语言**: 添加英文界面支持
8. **移动端优化**: 改进移动端用户体验

### 技术升级
9. **实时更新**: 使用 WebSocket 或轮询实现数据实时更新
10. **缓存优化**: 优化合约数据缓存策略
11. **错误处理**: 完善网络错误和交易失败的处理

## 部署与运维作业

### 测试网部署
12. **多网络支持**: 支持部署到多个测试网（Goerli、Mumbai 等）
13. **合约验证**: 完善合约在区块链浏览器上的验证
14. **监控告警**: 添加合约状态监控和异常告警

### 生产准备
15. **安全审计**: 使用 Slither、MythX 等工具进行安全分析
16. **Gas 优化**: 分析和优化合约的 Gas 消耗
17. **升级机制**: 实现合约升级机制（Proxy 模式）

## 高级扩展项目

### DeFi 集成
18. **流动性挖矿**: 集成 Uniswap 等 DEX 的流动性挖矿
19. **聚合收益**: 整合多个收益来源的聚合器
20. **闪电贷**: 集成闪电贷功能实现套利策略

### 跨链功能  
21. **跨链桥**: 实现跨链资产转移
22. **Layer 2**: 部署到 Polygon、Arbitrum 等 Layer 2

### 治理功能
23. **DAO 治理**: 添加治理代币和投票机制
24. **参数治理**: 通过治理调整利率、费用等参数

## 作业提交格式

每个作业请包含：
1. **功能说明**: 实现的功能描述
2. **技术方案**: 技术实现思路
3. **代码实现**: 完整的代码文件
4. **测试用例**: 相应的测试代码
5. **部署脚本**: 如果涉及合约修改
6. **前端截图**: 如果涉及 UI 改动
7. **Gas 分析**: 如果涉及合约优化

## 评分标准

- **功能完整性** (30%): 功能是否完整实现
- **代码质量** (25%): 代码规范性和可读性
- **测试覆盖** (20%): 测试用例的完整性
- **用户体验** (15%): 前端交互的友好性
- **技术创新** (10%): 是否有技术创新点
